
.newsitems-list
  %ul
    - newsitems.each do |n|
      %li
        - if !n.photo.blank?
          .Nphoto
            %h3
              - if n.username.blank?
                = t('users.anonymous')
              - else
                = link_to n.username, user_path(n.username)
              = n.descr unless n.descr.blank?
              = pretty_date n.created_at
            = link_to image_tag( n.photo.photo.url(:thumb) ), n.photo.photo.url(:small), :rel => 'lightbox[newsitem]'

        - elsif !n.report.blank?
          .Nreport
            %h3= link_to n.report.name, report_path(n.report.name_seo)
            .meta
              = "#{t('g.by')} #{n.report.username}"
              = "#{t('g.on')} #{pretty_date n.report.created_at}"
            - unless n.report.photo.blank?
              = link_to image_tag(n.report.photo.photo.url(:thumb)), report_path(n.report.name_seo)
            .subhead= n.report.subhead

        - elsif !n.gallery.blank?
          .Ngallery
            %h3= link_to n.gallery.name, gallery_path(n.gallery.galleryname)
            .meta
              = "#{t('galleries.new')}. #{n.gallery.username} "
              = "on #{pretty_date n.gallery.created_at}."
            - unless 0 == n.gallery.photos.length
              - n.gallery.photos[0..8].each do |photo|
                = link_to image_tag( photo.photo.url(:thumb), :alt => photo.name ), photo.photo.url(:small), :rel => "lightbox[#{n.gallery.galleryname}]"
            -# .subhead= n.descr

        - elsif !n.video.blank?
          .Nvideo
            %h3= link_to n.video.youtube_id, video_path(n.video.youtube_id)
            = render 'application/meta', :item => n.video
            = render 'videos/embed', :video => n.video

        - else
          .Ndescr
            .meta= pretty_date n.created_at
            .subhead= simple_format n.descr

        .c
    .c

  = paginate newsitems, :param_name => :newsitems_page
  .c
